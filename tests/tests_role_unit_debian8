#!/usr/bin/env bash_unit

RU_ENV_IMAGE="debian8"
. lib/role_unit

test_environment_is_docker_container_from_desired_image() {
  local distribution=$(echo $RU_ENV_IMAGE | sed -r 's/^([^0-9]+)(.*)/\1/')
  local version=$(echo $RU_ENV_IMAGE | sed -r 's/^([^0-9]+)(.*)/\2/')
  assert_equals "${distribution}" "$(ru_ansible_fact ansible_distribution | tr '[A-Z]' '[a-z]')"
  assert_equals "${version}" "$(ru_ansible_fact ansible_distribution_major_version)"
  assert_equals "docker" "$(ru_ansible_fact ansible_virtualization_type)"
}

setup_suite() {
  ru_init
  ru_run_ansible
}

# vim: syntax=sh
